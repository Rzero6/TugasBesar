/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package DokterDashboard;

import control.DetailTransaksiControl;
import control.TransaksiControl;
import javax.swing.table.TableModel;
import model.Staf;
import model.Transaksi;
import utils.UtilTable;

/**
 *
 * @author dendy
 */
public class RiwayatTransaksiDokterForm extends javax.swing.JPanel {

    /**
     * Creates new form RiwayatTransaksiDokterForm
     */
    private TransaksiControl transaksiControl;
    private DetailTransaksiControl detailTransaksiControl;
    int selectedIDTransaksi=0;
    int selectedIDDetailTransaksi=0;
    private Staf dataLogin;
    public RiwayatTransaksiDokterForm() {
        initComponents();
        transaksiControl = new TransaksiControl();
        detailTransaksiControl = new DetailTransaksiControl();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        detailsFrame = new javax.swing.JFrame();
        jPanel2 = new javax.swing.JPanel();
        jScrollPane4 = new javax.swing.JScrollPane();
        detailsTxt = new javax.swing.JTextArea();
        okBtn = new javax.swing.JButton();
        jPanel1 = new javax.swing.JPanel();
        refreshBtn1 = new javax.swing.JButton();
        namaLbl9 = new javax.swing.JLabel();
        namaLbl10 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tableRiwayat = new DokterDashboard.TableDokterCustom();
        detailBtn = new javax.swing.JButton();
        namaLbl11 = new javax.swing.JLabel();
        roundedPanelDokter1 = new DokterDashboard.roundedPanelDokter();
        namaDokterTxt = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        helloDokterTxt = new javax.swing.JLabel();
        notelpTxt = new javax.swing.JLabel();
        tanggalBergabungTxt = new javax.swing.JLabel();
        namaLbl14 = new javax.swing.JLabel();
        namaLbl15 = new javax.swing.JLabel();
        namaLbl16 = new javax.swing.JLabel();
        namaLbl17 = new javax.swing.JLabel();
        riwayatTransaksiLbl = new javax.swing.JLabel();
        jumlahPasienSelesai4 = new javax.swing.JLabel();

        detailsFrame.setUndecorated(true);

        detailsTxt.setEditable(false);
        detailsTxt.setColumns(20);
        detailsTxt.setRows(5);
        jScrollPane4.setViewportView(detailsTxt);

        okBtn.setText("OK");
        okBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                okBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(okBtn)
                    .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 502, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(20, 20, 20))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(jScrollPane4, javax.swing.GroupLayout.DEFAULT_SIZE, 370, Short.MAX_VALUE)
                .addGap(18, 18, 18)
                .addComponent(okBtn)
                .addGap(20, 20, 20))
        );

        javax.swing.GroupLayout detailsFrameLayout = new javax.swing.GroupLayout(detailsFrame.getContentPane());
        detailsFrame.getContentPane().setLayout(detailsFrameLayout);
        detailsFrameLayout.setHorizontalGroup(
            detailsFrameLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        detailsFrameLayout.setVerticalGroup(
            detailsFrameLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        jPanel1.setBackground(new java.awt.Color(245, 246, 250));
        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        refreshBtn1.setText("Refresh");
        refreshBtn1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                refreshBtn1ActionPerformed(evt);
            }
        });
        jPanel1.add(refreshBtn1, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 170, 90, 30));

        namaLbl9.setForeground(new java.awt.Color(102, 102, 102));
        namaLbl9.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        namaLbl9.setText("Daftar Riwayat Pasien yang selesai melakukan transaksi");
        jPanel1.add(namaLbl9, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 140, 360, 25));

        namaLbl10.setFont(new java.awt.Font("Century Gothic", 1, 20)); // NOI18N
        namaLbl10.setForeground(new java.awt.Color(3, 104, 218));
        namaLbl10.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        namaLbl10.setText("Riwayat");
        jPanel1.add(namaLbl10, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 20, 190, 25));

        tableRiwayat.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tableRiwayat.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tableRiwayatMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(tableRiwayat);

        jPanel1.add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 320, 700, 290));

        detailBtn.setBackground(new java.awt.Color(0, 66, 175));
        detailBtn.setForeground(new java.awt.Color(255, 255, 255));
        detailBtn.setText("- Detail");
        detailBtn.setEnabled(false);
        detailBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                detailBtnActionPerformed(evt);
            }
        });
        jPanel1.add(detailBtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(652, 280, 80, 30));

        namaLbl11.setFont(new java.awt.Font("Century Gothic", 0, 20)); // NOI18N
        namaLbl11.setForeground(new java.awt.Color(3, 104, 218));
        namaLbl11.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        namaLbl11.setText("Dashboard> ");
        jPanel1.add(namaLbl11, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 20, -1, 25));

        roundedPanelDokter1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        namaDokterTxt.setFont(new java.awt.Font("Century Gothic", 1, 20)); // NOI18N
        namaDokterTxt.setForeground(new java.awt.Color(255, 255, 255));
        namaDokterTxt.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        namaDokterTxt.setText("John Cena");
        roundedPanelDokter1.add(namaDokterTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 60, 150, 25));

        jLabel3.setFont(new java.awt.Font("Segoe UI", 0, 24)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(255, 255, 255));
        jLabel3.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Aset/profile putih.png"))); // NOI18N
        roundedPanelDokter1.add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 40, 140, 136));

        helloDokterTxt.setFont(new java.awt.Font("Century Gothic", 1, 14)); // NOI18N
        helloDokterTxt.setForeground(new java.awt.Color(255, 255, 255));
        helloDokterTxt.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        helloDokterTxt.setText("Hallo Dokter");
        roundedPanelDokter1.add(helloDokterTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 180, 150, 25));

        notelpTxt.setFont(new java.awt.Font("Century Gothic", 1, 20)); // NOI18N
        notelpTxt.setForeground(new java.awt.Color(255, 255, 255));
        notelpTxt.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        notelpTxt.setText("089 642 200 012");
        roundedPanelDokter1.add(notelpTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 120, 180, 25));

        tanggalBergabungTxt.setFont(new java.awt.Font("Century Gothic", 1, 20)); // NOI18N
        tanggalBergabungTxt.setForeground(new java.awt.Color(255, 255, 255));
        tanggalBergabungTxt.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        tanggalBergabungTxt.setText("23 Juli 2020");
        roundedPanelDokter1.add(tanggalBergabungTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 180, 170, 25));

        namaLbl14.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        namaLbl14.setForeground(new java.awt.Color(255, 255, 255));
        namaLbl14.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        namaLbl14.setText("No Handphone");
        roundedPanelDokter1.add(namaLbl14, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 100, 92, 25));

        namaLbl15.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        namaLbl15.setForeground(new java.awt.Color(255, 255, 255));
        namaLbl15.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        namaLbl15.setText("Tanggal Bergabung");
        roundedPanelDokter1.add(namaLbl15, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 160, 130, 25));

        namaLbl16.setFont(new java.awt.Font("Century Gothic", 0, 12)); // NOI18N
        namaLbl16.setForeground(new java.awt.Color(255, 255, 255));
        namaLbl16.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        namaLbl16.setText("Nama Dokter");
        roundedPanelDokter1.add(namaLbl16, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 40, 92, 25));

        namaLbl17.setFont(new java.awt.Font("Century Gothic", 1, 20)); // NOI18N
        namaLbl17.setForeground(new java.awt.Color(255, 255, 255));
        namaLbl17.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        namaLbl17.setText("Profile Dokter");
        roundedPanelDokter1.add(namaLbl17, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 10, 170, 25));

        jPanel1.add(roundedPanelDokter1, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 40, 360, 230));

        riwayatTransaksiLbl.setFont(new java.awt.Font("Century Gothic", 1, 36)); // NOI18N
        riwayatTransaksiLbl.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        riwayatTransaksiLbl.setText("Riwayat Transaksi");
        jPanel1.add(riwayatTransaksiLbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 60, 320, -1));

        jumlahPasienSelesai4.setFont(new java.awt.Font("Century Gothic", 1, 36)); // NOI18N
        jumlahPasienSelesai4.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jumlahPasienSelesai4.setText("Dokter");
        jPanel1.add(jumlahPasienSelesai4, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 100, 320, -1));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 810, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 640, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void refreshBtn1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_refreshBtn1ActionPerformed
        //      setTablePasien();

    }//GEN-LAST:event_refreshBtn1ActionPerformed

    private void tableRiwayatMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tableRiwayatMouseClicked
        int clickedRow = tableRiwayat.getSelectedRow();
        TableModel tableModel = tableRiwayat.getModel();
        selectedIDTransaksi = Integer.parseInt(tableModel.getValueAt(clickedRow, 7).toString()); 
        detailBtn.setEnabled(true);
        
    }//GEN-LAST:event_tableRiwayatMouseClicked

    private void detailBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_detailBtnActionPerformed
        Transaksi transaksi = transaksiControl.searchTransaksi(selectedIDTransaksi);
        transaksi.setDetailTransaksiList(detailTransaksiControl.getListDetailTransaksiByTransaksiID("", selectedIDTransaksi));
        detailsTxt.setText(transaksi.showNota());
        
        detailsFrame.pack();
        detailsFrame.setLocationRelativeTo(detailBtn);
        detailsFrame.setVisible(true);
    }//GEN-LAST:event_detailBtnActionPerformed

    private void okBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_okBtnActionPerformed
        detailsFrame.setVisible(false);
    }//GEN-LAST:event_okBtnActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton detailBtn;
    private javax.swing.JFrame detailsFrame;
    private javax.swing.JTextArea detailsTxt;
    private javax.swing.JLabel helloDokterTxt;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JLabel jumlahPasienSelesai4;
    private javax.swing.JLabel namaDokterTxt;
    private javax.swing.JLabel namaLbl10;
    private javax.swing.JLabel namaLbl11;
    private javax.swing.JLabel namaLbl14;
    private javax.swing.JLabel namaLbl15;
    private javax.swing.JLabel namaLbl16;
    private javax.swing.JLabel namaLbl17;
    private javax.swing.JLabel namaLbl9;
    private javax.swing.JLabel notelpTxt;
    private javax.swing.JButton okBtn;
    private javax.swing.JButton refreshBtn1;
    private javax.swing.JLabel riwayatTransaksiLbl;
    private DokterDashboard.roundedPanelDokter roundedPanelDokter1;
    private DokterDashboard.TableDokterCustom tableRiwayat;
    private javax.swing.JLabel tanggalBergabungTxt;
    // End of variables declaration//GEN-END:variables

    public void setDataLogin(Staf login){
        this.dataLogin = login;
    }
    
    public void setDataRiwayat(){
        tableRiwayat.setModel(transaksiControl.showRiwayatTransaksiDokter(dataLogin.getId(), "= 'Selesai'"));
        UtilTable.tableResizeColumnWidth(tableRiwayat);
    }
    
    public void setProfileDokter(){
        namaDokterTxt.setText(dataLogin.getNama());
        helloDokterTxt.setText("Dokter "+dataLogin.getNama());
        notelpTxt.setText(dataLogin.getNo_telepon());
        tanggalBergabungTxt.setText(dataLogin.getTanggal_bergabung());
        
    }

}
